1. 학습 날짜 // 

    2020-11-05(목)
 
2. 학습시간 // 

    09:00 ~ 18:00 (자가)
    
3. 학습 범위 및 주제 // 
    
    리눅스, 공유메모리, 세마포어

4. 동료 학습 방법 (온라인 또는 오프라인으로 동료 학습이 이뤄진 경우, 어떤 식으로 이뤄졌는지 기술) // 오프라인으로 만난경우 각각 슬랙 아이디 // 온라인(슬랙, 스카이프, 카카오톡)으로 피드백을 받는 경우 피드백해준 자 ID // 

    온라인을 통해 동료학습 하였다. 공유 메모리와 파이프의 차이점, 공유메모리에서 세마포어를 사용하는 이유에 대해 알게 되었다. 피드백해준 자 :gicho, jeonkim, sanhan, jungtlee, youcho, sanglee

5. 학습 목표 //

    리눅스 시스템 프로그래밍에 대해 학습한다.
    
6. 과제 제출 repository 주소 // 
    
    
    
7. 상세 학습 내용 (운영진 판단하에 학습 내용이 부진할 경우 재 제출 요구 예정) 필수사항 이외에 자유롭게 작성 가능 실제 코딩에 사용한 시간 (필수) 학습에 참고한 사이트 (홈페이지, 블로그, 동영상, 자료)와 간단한 내용(권고) 오늘 발견한 문제(버그, 몰랐던 것,...)와 해결 방안(필수) 다른 교육생들과의 협업, 토론 내용(권고) //
    
    09:00 ~ 18:00 동안 연습문제를 풀며 코드를 작성하였다.
    
            int semget(ket_t key, int nsems, int semflg);
            기능 - 세마포어 배열 할당
            리턴 - 성공 시 세마포어 배열의 id, 실패시 errno 설정 후 -1 리턴
            key - 서로다른 프로세스가 동일한 세마포어 배열에 접근하기 위한 키
            nsems - 필요한 세마포어의 개수
            semflg - IPC_CREAT 사용시 해당 세마포어 배열 없으면 새로 생성, IPC_CREAT | IPC_EXCL 사용시 해당 세마포어 배열 있으면 에러
            사용예 - id_sem = semget((key_t)KEY_SEM, 1, 0666|IPC_CREAT);

            int semop(int semid, struct sembuf * sops, unsigned nsops);
            기능 - 세마포어 배열 내 세마포어들의 동작 구현
            리턴 - 성공시 0, 실패시 errno 설정 후 -1 리턴
            semid - 세마포어 배열의 id
            sops - struct sembuf 배열의 시작 주소
            nsops - sops부터 시작디는 배열 요소의 개수
            사용예 - ret = semop(id_sem, &sb, 1);

            int shmget(key_t key, size_t size, int shmflg);
            기능 - 공유 메모리 할당
            리턴 - 성공 시 공유메모리의 id, 실패시 errno 설정 후 -1 리턴
            key - 서로 다른 프로세스가 동일한 공유 메모리에 접근하기 위한 키
            size - 할당할 공유 메모리의 크기
            shmflg - IPC_CREAT 사용시 공유 메모리 없으면 새로 새엉

            void * shmat(int shmid, const void * shmaddr, int shmflg);
            기능 - 프로세스의 주소 공간에 공유메모리 부착
            리턴 - 성공 시 부착된 공유 메모리 주소, 실패 시 errno 설정 후 -1 리턴
            shmid - 공유메모리의 id
            shmaddr - null 아니면 해당 주소에, null 이면 비어있는 주소에 공유메모리 부착
            shmflg = SHM_RDONLY이면 읽기 전용으로 부착
    
8. 학습 내용에 대한 개인적인 총평 (최소 5줄 이상) //

    fork 등을 이용하여 두개의 프로세스가 하나의 파일에 동시에 접근하는 경우 문제가 발생한다. 이를 방지하기 위해 정해진 개수의 프로세스만 파일에 접근하도록 설정할 수 있고 이러한 설정을 해준 부분을 임계영역이라고 한다는 것을 알았다. 임계영역을 설정하고 프로세스 접근을 통제하는 방식으로 여러가지 방법이 있으나 그 중 세마포어를 이용한 방식에 대해 배웠다. 세마포어의 특징으로는 허용하는 프로세스의 수를 1 이상으로 둘 수 있다는 것으로 여러개의 작업을 여러개의 프로세스가 수행할때 사용할 수 있다. 
    
    세마포어를 실제로 구현하는 것은 관련함수들이 알아서 수행해주기 때문에 어렵지 않았다. 임계영역으로 설정하려는 부분의 코드 앞뒤로 세마포어 진입과 차단을 명령하는 코드를 추가해주는 것으로 구현할 수 있다.
    
    프로세스 간 통신의 다른 방법으로 공유 메모리를 이용한 방식이 있다. 공유 메모리는 메모리 주소로 접근하며, 크기 조절이 가능하여 크기가 큰 파일을 공유할 수 있고 다른 프로세스간에도 사용이 가능하다. 공유메모리를 사용하는 방식은 shmget 함수를 이용하여 공유메모리를 할당하고 shmat 함수를 이용하여 공유메모리를 특정 프로세스와 연결하여 해당 메모리에 데이터를 읽고 쓸 수 있게 하면 된다.
    
    파이프와 달리 공유메모리는 읽고 쓰는 영역이 분리되어 있지 않기 때문에 다른 프로세스에서 동시에 메모리에 접근하는 경우 문제가 발생할 수 있다. 따라서 이를 방지하기 위해 세마포어를 이용하여 공유메모리를 임계영역으로 설정하고 프로세스의 접근을 제한해야한다.
    
    공유메모리와 세마포어의 기능에 대해서 알 수 있었고 두개가 같이 사용되어야 하는 이유에 대해 알 수 있었다.
    
9. 다음 학습 계획 (최소 5줄 이상) // 
    
    자료구조, 파이썬에 대해 학습한다.
    
    cub3d에 대해 공부하고 평가를 받는다.
    
    c++언어를 복습하며 심화학습한다.